<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta http-equiv="cache-control" content="no-cache, must-revalidate" />
  <link rel="icon" href="%PUBLIC_URL%/favicon.ico" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#000000" />
  <baseFallback href="%PUBLIC_URL%/" />
  <meta name="description" content="Web site created using create-react-app" />
  <link rel="apple-touch-icon" href="%PUBLIC_URL%/logo192.png" />
  <!--
      manifest.json provides metadata used when your web app is installed on a
      user's mobile device or desktop. See https://developers.google.com/web/fundamentals/web-app-manifest/
    -->
  <link rel="manifest" href="%PUBLIC_URL%/manifest.json" />
  <!--
      Notice the use of %PUBLIC_URL% in the tags above.
      It will be replaced with the URL of the `public` folder during the build.
      Only files inside the `public` folder can be referenced from the HTML.

      Unlike "/favicon.ico" or "favicon.ico", "%PUBLIC_URL%/favicon.ico" will
      work correctly both with client-side routing and a non-root public URL.
      Learn how to configure a non-root public URL by running `npm run build`.
    -->
  <title>Stock Management</title>
  <% if( process.env.REACT_APP_INJECT_SKELETON==='true' ){ %>
    <script type="text/javascript"
      src="/openmrs/ms/uiframework/resource/uicommons/scripts/jquery-1.12.4.min.js?cache=1660235323126"></script>
    <script type="text/javascript"
      src="/openmrs/ms/uiframework/resource/uicommons/scripts/jquery-ui-1.9.2.custom.min.js?cache=1660235323126"></script>
    <script type="text/javascript"
      src="/openmrs/ms/uiframework/resource/uicommons/scripts/underscore-min.js?cache=1660235323126"></script>
    <script type="text/javascript"
      src="/openmrs/ms/uiframework/resource/uicommons/scripts/knockout-2.2.1.js?cache=1660235323126"></script>
    <script type="text/javascript"
      src="/openmrs/ms/uiframework/resource/uicommons/scripts/emr.js?cache=1660235323126"></script>
    <script type="text/javascript"
      src="/openmrs/ms/uiframework/resource/uicommons/scripts/jquery.toastmessage.js?cache=1660235323126"></script>
    <script type="text/javascript"
      src="/openmrs/ms/uiframework/resource/uicommons/scripts/jquery.simplemodal.1.4.4.min.js?cache=1660235323126"></script>
    <script type="text/javascript"
      src="/openmrs/ms/uiframework/resource/appui/scripts/popper.min.js?cache=1660235323126"></script>
    <script type="text/javascript"
      src="/openmrs/ms/uiframework/resource/appui/scripts/bootstrap.min.js?cache=1660235323126"></script>
    <link rel="stylesheet"
      href="/openmrs/ms/uiframework/resource/uicommons/styles/styleguide/jquery-ui-1.9.2.custom.min.css?cache=1660235323126"
      type="text/css" />
    <link rel="stylesheet"
      href="/openmrs/ms/uiframework/resource/uicommons/styles/styleguide/jquery.toastmessage.css?cache=1660235323126"
      type="text/css" />
    <link rel="stylesheet"
      href="/openmrs/ms/uiframework/resource/referenceapplication/styles/home.css?cache=1660235323126"
      type="text/css" />
    <link rel="stylesheet" href="/openmrs/ms/uiframework/resource/appui/styles/bootstrap.min.css?cache=1660235323126"
      type="text/css" />
    <link rel="stylesheet" href="/openmrs/ms/uiframework/resource/appui/styles/header.css?cache=1660235323126"
      type="text/css" />
    <link rel="stylesheet"
      href="/openmrs/ms/uiframework/resource/referenceapplication/styles/referenceapplication.css?cache=1660235323126"
      type="text/css" />
    <style>
      body {
        max-width: 90%;
      }

      header #session-location {
        position: absolute;
        display: none;
        top: 60px;
        left: 1%;
        background: white;
        border: 2px solid #006056;
        -moz-border-radius: 3px;
        -webkit-border-radius: 3px;
        -o-border-radius: 3px;
        -ms-border-radius: 3px;
        -khtml-border-radius: 3px;
        border-radius: 3px;
        width: 500px;
        font-size: 0.8em;
        z-index: 1;
      }

      /* Increase spacing between login location buttons on the login page */
      form#login-form ul#sessionLocation.select li {
        margin: 5px 5px 0 0;
      }

      /* Fix the top alignment of the label from the fields */
      form label,
      .form label {
        margin-top: 0px;
      }


      .patient-header.dead {
        background: #B71515;
      }

      /* Hide the no diagnosis link on the visit details */
      #visits-list span.menu-title {
        display: none;
      }

      /* Hide the start visit button on the visits page */
      #noVisitShowVisitCreationDialog {
        display: none;
      }

      /* Hide the attachments link in the Overall actions */
      #attachments\.attachments\.overallActions\.default,
      .info-section .icon-share-alt {
        display: none;
      }

      /* Color for the HTML Form values displayed in the view  */
      span.value {
        color: blue;
        font-weight: bold;
      }

      /* Align the radio buttons to be placed horizontally on forms */
      .horizontal input[type="checkbox"],
      .horizontal input[type="radio"],
      .horizontal input[type="text"] {
        float: none;
        display: inline-block;
      }

      .horizontal label {
        display: inline-block;
      }

      .horizontal span.append-to-value {
        display: inline-block;
        margin-left: 10px;
      }

      /* A set of css definitions to be used across the data entry forms*/
      form#htmlform div.ai-page-frame label,
      form#htmlform .form label {
        float: left;
        padding: 0px 10px 0 0;
      }
    </style>
    <% } %>
</head>

<body>
  <% if( process.env.REACT_APP_INJECT_SKELETON==='true' ){ %>
    <script type="text/javascript">
      var OPENMRS_CONTEXT_PATH = 'openmrs';
      var openmrsContextPath = '/' + OPENMRS_CONTEXT_PATH;
      window.sessionContext = window.sessionContext || {
        locale: "en_GB"
      };
      window.translations = window.translations || {};
      var openmrs = {
        server: {
          timezone: "+0300",
          timezoneOffset: -180
        }
      }
    </script>
    <script type="text/javascript">
      var sessionLocationModel = {
        id: ko.observable(),
        text: ko.observable()
      };

      jq(function () {
        ko.applyBindings(sessionLocationModel, jq('.change-location').get(0));
        sessionLocationModel.id(2);
        sessionLocationModel.text("Pharmacy");
        var locationsList = jq('div#session-location').find('ul.select');
        var loginLocationsUrl = emr.fragmentActionLink("appui", "session", "getLoginLocations");
        var sessionLocation = {};
        sessionLocation.name = "Pharmacy";
        var multipleLoginLocations = false;
        jq.getJSON(loginLocationsUrl).done(function (locations) {
          if (jq(locations).size() > 1) {
            // we only want to activate the functionality to change location if there are actually multiple login locations
            multipleLoginLocations = true;
          }
          locations.sort(function (locationA, locationB) {
            return locationA.name.localeCompare(locationB.name);
          });
          jq.each(locations, function (index, location) {
            jq('<li>').addClass(sessionLocation.name == location.name ? 'selected' : '')
              .attr('locationUuid', location.uuid)
              .attr('locationId', location.id)
              .attr('locationName', location.name)
              .text(location.name)
              .appendTo(locationsList);
          });
        }).always(function () {
          if (multipleLoginLocations == true) {
            enableLoginLocations();
          }
        });
      });

      function enableLoginLocations() {
        jq('.change-location a i:nth-child(3)').show();
        jq(".change-location a").click(function () {
          jq('#session-location').show();
          jq(this).addClass('focus');
          jq(".change-location a i:nth-child(3)").removeClass("icon-caret-down");
          jq(".change-location a i:nth-child(3)").addClass("icon-caret-up");
        });
        jq('#session-location').mouseleave(function () {
          jq('#session-location').hide();
          jq(".change-location a").removeClass('focus');
          jq(".change-location a i:nth-child(3)").addClass("icon-caret-down");
          jq(".change-location a i:nth-child(3)").removeClass("icon-caret-up");
        });
        jq("#session-location ul.select").on('click', 'li', function (event) {
          var element = jq(event.target);
          var locationId = element.attr("locationId");
          var locationUuid = element.attr("locationUuid");
          var locationName = element.attr("locationName");
          var data = { locationId: locationId };
          jq("#spinner").show();
          jq.post(emr.fragmentActionLink("appui", "session", "setLocation", data), function (data) {
            sessionLocationModel.id(locationId);
            sessionLocationModel.text(locationName);
            jq('#selected-location').attr("location-uuid", locationUuid);
            jq('#session-location li').removeClass('selected');
            element.addClass('selected');
            jq("#spinner").hide();
            jq(document).trigger("sessionLocationChanged");
          })
          jq('#session-location').hide();
          jq(".change-location a").removeClass('focus');
          jq(".change-location a i:nth-child(3)").addClass("icon-caret-down");
          jq(".change-location a i:nth-child(3)").removeClass("icon-caret-up");
        });
        var event = ('ontouchstart' in window) ? 'click' : 'mouseenter mouseleave';
        jq('.identifier').on(event, function () {
          jq('.appui-toggle').toggle();
          jq('.appui-icon-caret-down').toggle();
        });
        jq('.identifier').css('cursor', 'pointer');
      }
    </script>
    <header>
      <nav class="navbar navbar-expand-lg navbar-dark navigation">
        <div class="logo">
          <a href="/openmrs/referenceapplication/home.page">
            <img src="/openmrs/ms/uiframework/resource/uicommons/images/logo/openmrs-with-title-small.png" />
          </a>
        </div>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
          aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav ml-auto user-options">
            <li class="nav-item identifier">
              <i class="icon-user small"></i>
              <span id="loggedInUser"></span>
              <i class="icon-caret-down appui-icon-caret-down link"></i><i class="icon-caret-up link appui-toggle"
                style="display: none;"></i>
              <ul id="user-account-menu" class="appui-toggle">
                <li>
                  <a id="" href="/openmrs/adminui/myaccount/myAccount.page">
                    My Account
                  </a>
                </li>
              </ul>
            </li>
            <li class="change-location">
              <a href="javascript:void(0);">
                <i class="icon-map-marker small"></i>
                <span id="selected-location" data-bind="text: text"
                  location-uuid="7f65d926-57d6-4402-ae10-a5b3bcbf7986"></span>
                <i class="icon-caret-down link" style="display:none"></i>
              </a>
            </li>
            <li class="nav-item logout">
              <a href="#/sign-out">
                Logout
                <i class="icon-signout small"></i>
              </a>
            </li>
          </ul>
        </div>
      </nav>
      <div id="session-location">
        <div id="spinner" style="position:absolute; display:none">
          <img src="/openmrs/ms/uiframework/resource/uicommons/images/spinner.gif">
        </div>
        <ul class="select"></ul>
      </div>
    </header>
    <ul id="breadcrumbs"></ul>
    <div id="body-wrapper">
      <div id="error-message" class="note-container">
        <div class="note error" style="display: none">
          <div class="text">
            <i class="icon-remove medium"></i>
          </div>
          <div class="close-icon"><i class="icon-remove"></i></div>
        </div>
      </div>
      <div id="info-message" class="note-container">
        <div class="note success" style="display: none">
          <div class="text">
            <i class="icon-ok medium"></i>
          </div>
          <div class="close-icon"><i class="icon-remove"></i></div>
        </div>
      </div>
      <div id="content" class="container-fluid">
        <% } %>

          <noscript>You need to enable JavaScript to run this app.</noscript>
          <div id="stockmgmt_root"></div>

          <% if( process.env.REACT_APP_INJECT_SKELETON==='true' ) { %>
      </div>

      <script id="breadcrumb-template" type="text/template">
          <li>
              {{ if (!first) { }}
              <i class="icon-chevron-right link"></i>
              {{ } }}
              {{ if (!last && breadcrumb.link) { }}
              <a href="{{= breadcrumb.link }}">
              {{ } }}
              {{ if (breadcrumb.icon) { }}
              <i class="{{= breadcrumb.icon }} small"></i>
              {{ } }}
              {{ if (breadcrumb.label) { }}
              {{= breadcrumb.label }}
              {{ } }}
              {{ if (!last && breadcrumb.link) { }}
              </a>
              {{ } }}
          </li>
      </script>
      <script type="text/javascript">
        jq(function () {
          emr.updateBreadcrumbs();
        });
        // global error handler
        jq(document).ajaxError(function (event, jqxhr) {
          emr.redirectOnAuthenticationFailure(jqxhr);
        });
        var featureToggles = {};        
      </script>
      <% } %>
        <script>
          function stockmanagement_handlebreadcrumb(e) {
            try {
              var reactAppStockMgmtUrl = "%REACT_APP_STOCKMGMT_SPA_PAGE_URL%";
              if ((window.STOCKMGMT_SPA_PAGE_URL && e.target.href.indexOf(window.STOCKMGMT_SPA_PAGE_URL) > 0) ||
                (reactAppStockMgmtUrl && reactAppStockMgmtUrl !== "undefined" && e.target?.href?.indexOf(reactAppStockMgmtUrl) > 0)) {
                if (window["StockMgmtNavWithReactRouter"]) {
                  var hrefTarget = e.target.getAttribute('href');
                  var anchorIndex = hrefTarget.indexOf('#');
                  if (anchorIndex > 0 && hrefTarget.length > (anchorIndex + 1)) {
                    hrefTarget = hrefTarget.substring(anchorIndex + 1);
                    e.preventDefault();
                    window["StockMgmtNavWithReactRouter"](hrefTarget);
                  }
                }
              }
            } catch (e) {
              console.log(e);
            }
          }
          try {
            jQuery('body').on("click", '#breadcrumbs a,#stockmgmt-tasks a', stockmanagement_handlebreadcrumb);
          } catch (e) {
          }
        </script>
        <textarea id="hdnTxtPrintLogo" style="display: none;"></textarea>
        <!--
      This HTML file is a template.
      If you open it directly in the browser, you will see an empty page.

      You can add webfonts, meta tags, or analytics to this file.
      The build step will place the bundled scripts into the <body> tag.

      To begin the development, run `npm start` or `yarn start`.
      To create a production bundle, use `npm run build` or `yarn build`.
    -->
</body>

</html>